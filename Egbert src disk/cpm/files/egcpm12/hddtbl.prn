CP/M RMAC ASSEM 1.1	#001	DPH F}R HARDDISK 21.40 MBYTE

                ;Um den richtigen DPB in DISKIO1.MAC einzubauen,mu~ er zun{chst
                ;mit XCPM3.LIB errechnet werden. Dies besorgt RMAC.
                ;
                ;  RMAC hddtbl $pz sz
                ;
                ;	Dann m}ssen nach dem Linken die Bytes herausgesucht
                ;	werden und von Hand in DISKIO1.MAC eingetragen
                ;	werden.
                ;
                ;
                ;
                ;	Dies ist die Version f}r Egbert Schr|er.
                ;	Platte mit 	4 K|pfen
                ;			615 Zylindern
                ;			17 Sektoren/Track
                ;			
                ;	Aufgeteilt wird die Platte in 2 logische Laufwerke
                ;	Da dein Booteprom nicht von der Harddisk booten kann,
                ;	fallen die Bootspuren des ersten logischen Laufwerkes weg.
                ;
                ;	Die Aufteilung sieht physikalisch folgenderma~en aus:
                ;
                ; Spur-Nr.	0		307		615
                ; Partit. 0	=================------------------
                ; Partit. 1	-----------------==================
                ;
                ; = Datenspuren der Partition.
                ;
                ;	siehe auch den Artikel von Helmut Bernhardt.
                ;	 	 
                ;
                ;
                 
                     title 'DPH f}r Harddisk 21.40 MByte'
                
                
                	maclib	xcpm3
                
                
                hdsk0	dph	0,hddph0
 0000+0000      	DW 0		; TRANSLATE TABLE ADDRESS
 0002+0000000000	DB 0,0,0,0,0,0,0,0,0	; BDOS SCRATCH AREA
 000B+00        	DB 0			; MEDIA FLAG
 000C+3200      	DW HDDPH0			; DISK PARAMETER BLOCK
 000E+FEFF      	DW 0FFFEH		; CHECKSUM VECTOR ALLOCATED BY
 0010+FEFF      	DW 0FFFEH		; ALLOC VECTOR ALLOCATED BY GENCPM
 0012+FEFFFEFFFE	DW 0FFFEH,0FFFEH,0FFFEH	; DIRBCB, DTABCB, HASH ALLOC'D
 0018+00        	DB 0			; HASH BANK
                hdsk1	dph	1,hddph1
 0019+0100      	DW 1		; TRANSLATE TABLE ADDRESS
 001B+0000000000	DB 0,0,0,0,0,0,0,0,0	; BDOS SCRATCH AREA
 0024+00        	DB 0			; MEDIA FLAG
 0025+4300      	DW HDDPH1			; DISK PARAMETER BLOCK
 0027+FEFF      	DW 0FFFEH		; CHECKSUM VECTOR ALLOCATED BY
 0029+FEFF      	DW 0FFFEH		; ALLOC VECTOR ALLOCATED BY GENCPM
 002B+FEFFFEFFFE	DW 0FFFEH,0FFFEH,0FFFEH	; DIRBCB, DTABCB, HASH ALLOC'D
CP/M RMAC ASSEM 1.1	#002	DPH F}R HARDDISK 21.40 MBYTE

 0031+00        	DB 0			; HASH BANK
                
                
                hddph0	hdpb	512,68,307,4096,2048,0,8000h	;partition 0
 0032+1001      	DW	??0005		; 128 BYTE RECORDS PER TRACK
 0034+051F      	DB	??0006,??0007	; BLOCK SHIFT AND MASK
 0036+01        	DB	??0008		; EXTENT MASK
 0037+300A      	DW	??0009		; MAXIMUM BLOCK NUMBER
 0039+FF07      	DW	??0010		; MAXIMUM DIRECTORY ENTRY NUMBER
 003B+FFFF      	DB	??0011,??0012	; ALLOC VECTOR FOR DIRECTORY
 003D+0080      	DW	??0013		; CHECKSUM SIZE
 003F+0000      	DW	0		; OFFSET FOR SYSTEM TRACKS
 0041+0203      	DB	??0014,??0015	; PHYSICAL SECTOR SIZE SHIFT
                hddph1	hdpb	512,68,615,4096,2048,307,8000h	;partition 1
 0043+1001      	DW	??0017		; 128 BYTE RECORDS PER TRACK
 0045+051F      	DB	??0018,??0019	; BLOCK SHIFT AND MASK
 0047+01        	DB	??0020		; EXTENT MASK
 0048+390A      	DW	??0021		; MAXIMUM BLOCK NUMBER
 004A+FF07      	DW	??0022		; MAXIMUM DIRECTORY ENTRY NUMBER
 004C+FFFF      	DB	??0023,??0024	; ALLOC VECTOR FOR DIRECTORY
 004E+0080      	DW	??0025		; CHECKSUM SIZE
 0050+3301      	DW	307		; OFFSET FOR SYSTEM TRACKS
 0052+0203      	DB	??0026,??0027	; PHYSICAL SECTOR SIZE SHIFT
                
                ;		 !  !   !   !    !    !	   !		
S               ;		 !  !   !   !    !    !	   ------ Flag f}r Non-Removal-Medium	
S               ;		 !  !   !   !    !    ----------- reserv. Systemspuren	
S               ;    		 !  !   !   !    ---------------- 2048 Directory Eintr{ge  
S               ;		 !  !   !   --------------------- 4 KB Blockgr|~e
S               ;		 !  !   ------------------------- Anzahl Zylinder des Laufwerkes
S               ;		 !  ----------------------------- Sektoren/Zylinder (4 K|pfe               
S               ;		 !				  * 17 Sektoren)
                ;		 -------------------------------- Bytes / Sektor
                ;
                ;
 0054           	end
