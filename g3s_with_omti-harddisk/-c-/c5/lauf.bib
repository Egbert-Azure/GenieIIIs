(****************************************************************************)
(*   Bibliotheks-Modul LAUF.BIB  (nur mit WINDOW.BIB!)                      *)
(*                                                                          *)
(*   Bringt bei Bedarf etwas Leben in Form einer Laufschrift auf dem        *)
(*   Bildschirm.                                                            *)
(*   (t L_str127)                                                           *)
(*   (v Lauf_Rec)                                                           *)
(*   p InitLaufschrift(x,y : integer; Satz : string[127]; B, K : integer)   *)
(*     Dabei ist                                                            *)
(*       x, y : die Bildschirmposition f}r die Laufschrift                  *)
(*       Satz : die Laufschrift selbst                                      *)
(*       B    : die Anzahl der angezeigte Laufschriftspalten                *)
(*       K    : die TimeOut-Konstante                                       *)
(*                                                                          *)
(*   p Lauf   Bei jedem Aufruf wird eine Variable inkrementiert. Wir der    *)
(*            Wert von K erreicht, so wird die Laufschrift ein Zeichen      *)
(*            weiterger}ckt und die Variable wieder auf Null gesetzt        *)
(****************************************************************************)

type L_str127 = string[127];
var  Lauf_Rec : record
                   TimeOut, LaufWindow, Lauf_X, Lauf_Y, LaufBreite : integer;
                   LaufSchrift : string[127]
                 end;

procedure InitLaufschrift(x,y : integer; Satz : L_str127;
                          Breite, Konstante : integer);
  var i : integer;
  begin
    with Lauf_Rec do
      begin
        Lauf_X:=x; Lauf_Y:=y; LaufBreite:=Breite;
        LaufSchrift:=Satz; for i:=1 to Breite do LaufSchrift:=' '+Laufschrift;
        TimeOut:=Konstante; LaufWindow:=ScreenPtr
      end
  end; (* InitLaufSchrift *)

procedure Lauf;
  const Count : integer = 0;
  var   temp, t_x, t_y : integer;
  begin
    with Lauf_Rec do
      begin
        Count:=succ(Count); if Count<TimeOut then exit;
        t_x:=WhereX; t_y:=WhereY;
        Count:=0; temp:=ScreenPtr; ChangeWindow(LaufWindow);
        gotoxy(Lauf_X,Lauf_Y); write(copy(LaufSchrift,1,LaufBreite));
        LaufSchrift:=LaufSchrift+LaufSchrift[1]; delete(LaufSchrift,1,1);
        ChangeWindow(temp); gotoxy(t_x,t_y)
      end
  end; (* Lauf *)
