(****************************************************************************)
(* CHIP-SPECIAL-Bibliotheksmodul READCHAR.BIB                               *)
(*                                                                          *)
(* p ReadChar(VAR c: char);                                                 *)
(*     Einlesen eines Zeichens mit Umwandlung von Sondertasten in die       *)
(*     entsprechenden WordStar-Kompatiblen Control-Codes                    *)
(*     Auswertungsm|glichkeit von Controlsequenzen mit zwei Zeichen, wie    *)
(*     zum Beispiel ^QS.                                                    *)
(* p LiesZeichen(VAR c: char);                                              *)
(*     Prozedur LiesZeichen hat dieselbe Funktion, wurde aus Kompatibili-   *)
(*     t{tsgr}nden aufgenommen                                              *)
(****************************************************************************)

PROCEDURE ReadChar(VAR C : CHAR);
PROCEDURE LiesZeichen(VAR C: CHAR);


PROCEDURE ReadChar(VAR C : CHAR);

{3.0}  CONST ScanCode = #27;
             Puffer : CHAR = #0;
  BEGIN
    IF Puffer<>#0 THEN BEGIN C:=Puffer; Puffer:=#0; EXIT END;
{3.0} Read(kbd,c);
    IF C=ScanCode THEN IF KeyPressed THEN BEGIN
{3.0} Read(kbd,c);
      CASE C OF
        #72 : C:=^E; (* Cursor hoch *)
        #80 : C:=^X; (* Cursor tief *)
        #75 : C:=^S; (* Cursor links *)
        #77 : C:=^D; (* Cursor rechts *)
        #73 : C:=^R; (* PageUp *)
        #81 : C:=^C; (* PageDown *)
        #82 : C:=^V; (* Insert *)
        #83 : C:=^G; (* Delete *)
       #115 : C:=^A; (* Ctrl + Cursor links *)
       #116 : C:=^F; (* Ctrl + Cursor rechts *)
        #71 : BEGIN C:=^Q; Puffer:=^S END; (* Home *)
        #79 : BEGIN C:=^Q; Puffer:=^D END; (* End *)
       #132 : BEGIN C:=^Q; Puffer:=^R END; (* Ctrl + PageUp *)
       #118 : BEGIN C:=^Q; Puffer:=^C END; (* Ctrl + PageDown *)
       #119 : BEGIN C:=^Q; Puffer:=^E END; (* Ctrl + Home *)
       #117 : BEGIN C:=^Q; Puffer:=^X END; (* Ctrl + End *)
       ELSE C:=#0
      END (* CASE *)
    END (* IF *)
  END; (* ReadChar IBM *)

PROCEDURE LiesZeichen(VAR c : char);
  begin ReadChar(c) end;

